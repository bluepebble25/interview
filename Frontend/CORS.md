# CORS는 무엇인지, CORS를 처리해본 경험을 말씀해주세요.

## CORS란?

- Cross-Origin Resource Sharing, 교차 출처 리소스 공유의 약자이다.
- 원래는 같은 출처끼리만 리소스를 공유할 수 있는데, 만약 다른 출처끼리 리소스를 공유하려 한다면 HTTP 헤더에 명시된 출처만 리소스에 접근할 수 있도록 하는 정책이 CORS이다. 같은 출처란 도메인, 프로토콜, 포트번호까지 같은 것을 의미한다.
- 중간에 출처가 다른 사이트가 끼어들어서 XSS(크로스 사이트 스크립팅)공격을 할 수도 있기 때문에 만들어진 정책이고, 브라우저에 구현되어 있기 때문에 서버끼리의 통신에는 적용이 안된다.
- 브라우저 상에 구현된 것이기 때문에 서버에 요청하면 정상적으로 답변을 받을수는 있지만 브라우저가 폐기한다.
- img, video, script, link(css파일)는 자동으로 CORS를 지원하기 때문에 별도로 신경쓰지 않아도 된다.

### CORS가 일어나는 과정

- CORS가 일어나는 과정은 클라이언트가 프리플라이트로 OPTIONS 헤더에 자신의 출처(origin)를 명시해서 보내고, 서버는 그에 대한 응답으로 `Access-Control-Allow-Origin`헤더에 이 리소스에 접근하는 것을 허용하는 출처를 명시한다. 브라우저가 그것을 받아봐서 자신의 출처와 일치하면 그 리소스에 접근할 수 있고 아니면 받은 정보를 폐기하게 됩니다.

### SOP란?

- Same-Origin Policy의 약자.
- 같은 출처끼리만 리소스를 공유할 수 있다는 정책인데, 만약 다른 출처끼리 리소스를 공유한다면 CORS를 잘 지키는 것이 조건이다.

## CORS 해결방법

- 서버에서 헤더를 세팅하면 되는데, `Access-Control-Allow-Origin` 헤더에 리소스에 접근할 수 있는 출처를 명시해주면 된다.
- 아니면 프론트엔드상에서만 해결하려면 프록시 서버를 이용하는 방법도 있다.

## CORS 해결 경험

- 포트폴리오에서 언급한 프로젝트를 할 때는 서버도 제가 구현한 것이기 때문에 CORS 모듈을 설치해서 해결했습니다.
- 물론 미들웨어에서 `Access-Control-Allow-Origin`헤더를 직접 설정해서 모든 요청에 헤더를 같이 보내는 방법도 알고 있습니다.
- 아니면 서버를 건드리지 못해서 프론트엔드에서만 해결해야 할 때는 package.json에 proxy를 설정해주면 됩니다.

## Reference

- https://evan-moon.github.io/2020/05/21/about-cors/
